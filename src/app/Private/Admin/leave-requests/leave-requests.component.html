<div class="container">
    <div class="row">
        <p class="heading">Leave Requests</p>
        <!-- app.component.html -->
        <p-table [value]="leaveRequests">
            <ng-template pTemplate="header">
                <tr class="tr">
                    <th class="th">Requested By</th>
                    <th class="th">Requested On</th>
                    <th class="th">Leave Type</th>
                    <th class="th">Leave Status</th>
                    <th class="th">Action</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-leaveRequest>
                <tr class="tr">
                    <td class="td">{{leaveRequest.requestedByName}}</td>
                    <td class="td">{{leaveRequest.createdOn}}</td>
                    <td class="td">{{leaveRequest.leaveType}}</td>
                    <td class="td">{{leaveRequest.leaveStatus}}</td>

                    <td class="td">
                        <div *ngIf="leaveRequest.leaveStatusId == 1 "><p-button icon="pi pi-check" styleClass="p-button-success me-2" (click)="OpenModal(leaveRequest.identifier,2)"></p-button>
                    <p-button icon="pi pi-times" styleClass="p-button-danger " (click)="OpenModal(leaveRequest.identifier,3)"></p-button></div>
                    </td>

                </tr>
            </ng-template>
        </p-table>
    </div>

</div>

<p-dialog header="Approve Leave" [(visible)]="displayModal" modal="modal" [closable]="true" [style]="{width: '50vw'}">
    <form (ngSubmit)="ApproveOrRejectLeave()">
      <div class="p-fluid">
        <div class="p-field">
          <label for="leaveReason">Admin Remarks</label>
          <textarea id="leaveReason" rows="5" cols="30" pInputTextarea [(ngModel)]="approveOrRejectLeave.adminRemarks" name="AdminRemarks"></textarea>
        </div>
      </div>
      <p-footer>
        <p-button *ngIf="approveOrRejectLeave.statusId === 2 " type="submit" label="Approve" icon="pi pi-check" styleClass="p-button-success"></p-button>
        <p-button *ngIf="approveOrRejectLeave.statusId === 3" type="submit" label="Reject" icon="pi pi-times" styleClass="p-button-danger"></p-button>
      </p-footer>
    </form>
  </p-dialog>